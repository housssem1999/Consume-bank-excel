# Deployment Guide - Personal Finance Dashboard

This guide provides instructions for deploying the Personal Finance Dashboard using **Vercel (Frontend) + Railway (Backend)** - the recommended deployment option leveraging free resources from GitHub Student Pack.

## üöÄ Deployment Architecture

The application uses a two-tier deployment approach:

- **Frontend**: Deployed to Vercel (free tier)
- **Backend**: Deployed to Railway ($5/month student credit)
- **Database**: PostgreSQL database on Railway
- **Total cost**: $0 with student benefits

## üìã Prerequisites

- GitHub account with Student Pack benefits
- Vercel account (free tier)
- Railway account (free tier with $5/month student credit)

## üõ†Ô∏è Step-by-Step Deployment

### Step 1: Deploy Backend to Railway

1. **Sign up for Railway**: [railway.app](https://railway.app)
   - Connect your GitHub account
   - Get $5 free credit monthly with GitHub Student Pack

2. **Create new project**:
   - Select "Deploy from GitHub repo"
   - Choose your forked repository
   - Railway will auto-detect the Java application

3. **Deploy Spring Boot application**:
   - Railway automatically detects the Maven project
   - Build command: `mvn clean package -DskipTests`
   - Start command: `java -jar target/finance-dashboard-*.jar`

4. **Add PostgreSQL database**:
   - Click "New" ‚Üí "Database" ‚Üí "PostgreSQL"
   - Railway automatically sets DATABASE_URL environment variable

5. **Set environment variables**:
   ```env
   SPRING_PROFILES_ACTIVE=prod
   CORS_ALLOWED_ORIGINS=https://your-app.vercel.app
   ```

### Step 2: Deploy Frontend to Vercel

1. **Sign up for Vercel**: [vercel.com](https://vercel.com)
   - Connect your GitHub account
   - Import your forked repository

2. **Configure build settings**:
   - Build Command: `cd frontend && CI=false npm run build`
   - Output Directory: `frontend/build`
   - Install Command: `cd frontend && npm install`

3. **Set environment variables**:
   ```env
   CI=false
   REACT_APP_API_URL=https://your-backend.railway.app
   ```

4. **Deploy**:
   - Vercel will automatically deploy on every push to main branch
   - Get your Vercel URL (e.g., `https://your-app.vercel.app`)

### Step 3: Update CORS Configuration

1. **Update Railway environment variables**:
   - Set `CORS_ALLOWED_ORIGINS` to your actual Vercel URL
   - Example: `https://finance-dashboard-123abc.vercel.app`

2. **Restart Railway deployment** to apply new CORS settings

## üîß Configuration Details

### Backend Environment Variables (Railway)
```env
SPRING_PROFILES_ACTIVE=prod
DATABASE_URL=postgresql://[generated by Railway]
CORS_ALLOWED_ORIGINS=https://your-app.vercel.app
PORT=8080
```

### Frontend Environment Variables (Vercel)
```env
CI=false
REACT_APP_API_URL=https://your-backend.railway.app
REACT_APP_ENVIRONMENT=production
```

### Database Configuration

Railway automatically provides a PostgreSQL database with:
- **Connection URL**: Automatically set as `DATABASE_URL`
- **SSL**: Enabled by default
- **Backups**: Automatic daily backups
- **Monitoring**: Built-in database monitoring

## üöÄ Automated Deployment Scripts

Use the provided scripts for easier deployment:

### Railway Backend Deployment
```bash
# Make script executable
chmod +x scripts/deploy-railway.sh

# Run deployment script
./scripts/deploy-railway.sh
```

### Local Development Setup
```bash
# Setup development environment
chmod +x scripts/setup-dev.sh
./scripts/setup-dev.sh
```

## üí∞ Cost Breakdown

### Vercel (Frontend)
- **Free tier includes**:
  - 100GB bandwidth/month
  - Unlimited sites
  - Custom domains
  - HTTPS certificates

### Railway (Backend)
- **$5 credit/month** (covered by GitHub Student Pack)
  - 500 hours runtime
  - 1GB RAM
  - PostgreSQL database included
  - Custom domains

### **Total Monthly Cost: $0**
*All costs covered by GitHub Student Pack benefits*

## üîê Security Considerations

### Production Security Checklist
- [x] HTTPS enabled automatically (Vercel/Railway)
- [x] CORS configured for production domains
- [x] Environment variables for secrets
- [x] Database SSL connections enabled
- [x] Security headers configured
- [ ] Set up monitoring and logging
- [ ] Configure rate limiting (optional)

### Environment Variables Security
```bash
# Never commit these to version control
echo "*.env" >> .gitignore
echo ".env.local" >> .gitignore
echo ".env.production" >> .gitignore
```

## üêõ Troubleshooting

### Common Issues

1. **CORS Errors**:
   ```bash
   # Update CORS_ALLOWED_ORIGINS in Railway
   # Make sure it matches your exact Vercel URL
   CORS_ALLOWED_ORIGINS=https://your-exact-vercel-url.vercel.app
   ```

2. **Database Connection Issues**:
   - Railway automatically sets DATABASE_URL
   - Check Railway logs for connection errors
   - Ensure PostgreSQL service is running

3. **Frontend Build Failures**:
   ```bash
   # Always use CI=false for React builds
   CI=false npm run build
   ```

4. **API Not Reachable**:
   - Verify REACT_APP_API_URL is set correctly
   - Check Railway service is running
   - Test API endpoint directly: `https://your-backend.railway.app/api/categories`

### Checking Logs

**Railway Logs**:
- Go to Railway dashboard ‚Üí Your project ‚Üí Deployments
- Click on latest deployment to view logs

**Vercel Logs**:
- Go to Vercel dashboard ‚Üí Your project ‚Üí Functions/Deployments
- View build and runtime logs

## üìö Additional Resources

### Student Pack Benefits
- **GitHub Student Pack**: [education.github.com](https://education.github.com/pack)
- **Railway Credits**: $5/month for students
- **Vercel**: Free hosting for personal projects

### Documentation Links
- [Vercel Deployment](https://vercel.com/docs)
- [Railway Deployment](https://docs.railway.app)
- [Spring Boot Production Guide](https://spring.io/guides/gs/spring-boot/)

## üÜò Support

If you encounter issues:

1. Check the [GitHub Issues](https://github.com/housssem1999/Consume-bank-excel/issues)
2. Review deployment logs in Railway and Vercel dashboards
3. Verify all environment variables are set correctly
4. Test the application locally first

## üéØ Next Steps

After successful deployment:

1. **Custom Domain**: Configure custom domain (free with Vercel)
2. **Monitoring**: Set up application monitoring in Railway
3. **Backups**: Configure additional database backups if needed
4. **Analytics**: Add usage analytics (Google Analytics, etc.)
5. **Performance**: Monitor and optimize application performance

## ‚úÖ Deployment Checklist

- [ ] Railway account created with GitHub Student Pack
- [ ] Vercel account created and connected to GitHub
- [ ] Repository forked and connected to both platforms
- [ ] Backend deployed to Railway with PostgreSQL
- [ ] Frontend deployed to Vercel
- [ ] Environment variables configured correctly
- [ ] CORS settings updated with actual URLs
- [ ] Application tested and working
- [ ] Custom domain configured (optional)
- [ ] Monitoring set up (optional)

---

**üéì Student Benefits Used:**
- Vercel: Free hosting
- Railway: $5/month credit (GitHub Student Pack)
- **Total Cost: $0/month**